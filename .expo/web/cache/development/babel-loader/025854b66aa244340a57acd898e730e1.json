{"ast":null,"code":"import axios from \"axios\";\nvar CancelToken = axios.CancelToken;\nimport { GET, POST, PUT, PATCH, DELETE } from \"./constants\";\n\nvar cancel = function cancel() {};\n\nexport var cancelRequest = function cancelRequest() {\n  return cancel;\n};\n\nfunction getQueryString(params) {\n  var esc = encodeURIComponent;\n  return \"?\" + Object.keys(params).map(function (k) {\n    return esc(k) + \"=\" + esc(params[k]);\n  }).join(\"&\");\n}\n\nfunction getJsonBody(params) {\n  return params;\n}\n\nexport var fetch = function fetch(requestType, resourceURL, parameters) {\n  switch (requestType) {\n    case GET:\n      console.log(\"FETCH\", axios.defaults.headers);\n      return new Promise(function (resolve, reject) {\n        var queryString = getQueryString(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL + queryString);\n        axios.get(\"/\" + resourceURL + queryString, {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          })\n        }).then(function (response) {\n          resolve(response.data);\n        }).catch(function (error) {\n          console.log(error.response);\n          reject(error);\n        });\n      });\n\n    case POST:\n      return new Promise(function (resolve, reject) {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios.post(\"/\" + resourceURL, jsonBody, {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          })\n        }).then(function (response) {\n          resolve(response.data);\n        }).catch(function (error) {\n          if (error.response.data.email) {\n            reject(error.response.data.email);\n          } else if (error.response.data.password) {\n            reject(error.response.data.password);\n          }\n        });\n      });\n\n    case PUT:\n      return new Promise(function (resolve, reject) {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios.put(\"/\" + resourceURL, jsonBody, {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          })\n        }).then(function (response) {\n          resolve(response.data);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n\n    case PATCH:\n      return new Promise(function (resolve, reject) {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios.patch(\"/\" + resourceURL, jsonBody, {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          })\n        }).then(function (response) {\n          resolve(response.data);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n\n    case DELETE:\n      return new Promise(function (resolve, reject) {\n        var queryString = getQueryString(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL + queryString);\n        axios.delete(\"/\" + resourceURL + queryString, {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          })\n        }).then(function (response) {\n          resolve(response.data);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n\n    default:\n      break;\n  }\n};","map":{"version":3,"sources":["/home/dungnv/Desktop/React-Native/ecomerce-mob-app/src/apis/fetch.js"],"names":["axios","CancelToken","GET","POST","PUT","PATCH","DELETE","cancel","cancelRequest","getQueryString","params","esc","encodeURIComponent","Object","keys","map","k","join","getJsonBody","fetch","requestType","resourceURL","parameters","console","log","defaults","headers","Promise","resolve","reject","queryString","baseURL","get","cancelToken","executor","c","then","response","data","catch","error","jsonBody","post","email","password","put","patch","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nlet CancelToken = axios.CancelToken;\nimport { GET, POST, PUT, PATCH, DELETE } from \"./constants\";\n\nvar cancel = () => {};\nexport const cancelRequest = () => {\n  return cancel;\n};\n\nfunction getQueryString(params) {\n  let esc = encodeURIComponent;\n  return (\n    \"?\" +\n    Object.keys(params)\n      .map(k => esc(k) + \"=\" + esc(params[k]))\n      .join(\"&\")\n  );\n}\n\nfunction getJsonBody(params) {\n  return params;\n}\n\nexport const fetch = (requestType, resourceURL, parameters) => {\n  switch (requestType) {\n    case GET:\n      console.log(\"FETCH\", axios.defaults.headers);\n      return new Promise((resolve, reject) => {\n        var queryString = getQueryString(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL + queryString);\n        axios\n          .get(\"/\" + resourceURL + queryString, {\n            cancelToken: new CancelToken(function executor(c) {\n              cancel = c;\n            })\n          })\n          .then(response => {\n            resolve(response.data);\n          })\n          .catch(error => {\n            console.log(error.response);\n            reject(error);\n          });\n      });\n\n    case POST:\n      return new Promise((resolve, reject) => {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios\n          .post(\"/\" + resourceURL, jsonBody, {\n            cancelToken: new CancelToken(function executor(c) {\n              cancel = c;\n            })\n          })\n          .then(response => {\n            resolve(response.data);\n          })\n          .catch(error => {\n            if (error.response.data.email) {\n              reject(error.response.data.email);\n            } else if (error.response.data.password) {\n              reject(error.response.data.password);\n            }\n          });\n      });\n\n    case PUT:\n      return new Promise((resolve, reject) => {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios\n          .put(\"/\" + resourceURL, jsonBody, {\n            cancelToken: new CancelToken(function executor(c) {\n              cancel = c;\n            })\n          })\n          .then(response => {\n            resolve(response.data);\n          })\n          .catch(error => {\n            reject(error);\n          });\n      });\n\n    case PATCH:\n      return new Promise((resolve, reject) => {\n        var jsonBody = getJsonBody(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL, jsonBody);\n        axios\n          .patch(\"/\" + resourceURL, jsonBody, {\n            cancelToken: new CancelToken(function executor(c) {\n              cancel = c;\n            })\n          })\n          .then(response => {\n            resolve(response.data);\n          })\n          .catch(error => {\n            reject(error);\n          });\n      });\n\n    case DELETE:\n      return new Promise((resolve, reject) => {\n        var queryString = getQueryString(parameters);\n        console.log(axios.defaults.baseURL + \"/\" + resourceURL + queryString);\n        axios\n          .delete(\"/\" + resourceURL + queryString, {\n            cancelToken: new CancelToken(function executor(c) {\n              cancel = c;\n            })\n          })\n          .then(response => {\n            resolve(response.data);\n          })\n          .catch(error => {\n            reject(error);\n          });\n      });\n\n    default:\n      break;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}